{% extends "mainnav.html" %}
{% block content %}
<!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css"> -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.2/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.2/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css">
    <style>
      @media print {
          #results-table {
              margin: 0 auto;
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
          }
      }
  </style>
  
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.10.0/jspdf.umd.min.js"></script> -->
    <script src="{{ url_for('static', filename='jspdf.umd.min.js') }}"></script>
   
          <div class="container" style="margin-top: 50px;margin-bottom: 200px;">

      
            <div class="row justify-content-center">
              <div class="col-md-10">
                
                <div class="row align-items-center">
                  <div class="col-lg-4 mb-5 mb-lg-0" style="margin-top: 70px;">
                    <div class="card" style="width: 18rem;">
                      <img src="{{ url_for('static',filename='images/pi.png') }}" class="card-img-top" alt="..." style="height:175px">
                      <div class="card-body">
                        <h5 class="card-title">{{user.name}}</h5>
                      
                      </div>
                      <ul class="list-group list-group-flush">
                        <li class="list-group-item"><b>Index Number : </b>{{user.index_number}}</li>
                        <li class="list-group-item"><b>Completed : </b>{{user.completed_year}}</li>
                        <li class="list-group-item">Vestibulum at eros</li>
                      </ul>
                    
                    </div>
                 
      
                  </div>
                  <div class="col-lg-7 ml-auto" style="margin-top: 10%;height: 100%;width: 100%;">
                    {% for result in data %}
                    {{result.result}}
                    {{result.completed_year}}
                    {% endfor %}        
                  

                    <div class="row">
                      <div class="col">
                          <div class="card">
                              <div class="card-body">
                                  <div class="table-responsive">
                                      <table class="table table-bordered" id="results-table">
                                          <thead class="thead-dark">
                                              <tr>
                                                  <th>Subject</th>
                                                  <th>Score</th>
                                                  <th>Year</th>
                                              </tr>
                                          </thead>
                                          <tbody>
                                              {% for item in results %}
                                              <tr>
                                                  <td>{{ item.subject.name }}</td>
                                                  <td>{{ item['result'] }}</td>
                                                  <td>{{ item['year'] }}</td>
                                              </tr>
                                              {% endfor %}
                                          </tbody>
                                      </table>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  
             

<button onclick="downloadPDF()">Download PDF</button>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<!-- <script>
    function downloadPDF() {
        const doc = new jsPDF();
        doc.autoTable({ html: '#results-table' });
        doc.save('table.pdf');
    }
</script> -->
<script>
  function downloadPDF() {
      const element = document.getElementById("results-table");

      // Create a temporary container to hold the centered table
      const container = document.createElement("div");
      container.style.display = "flex";
      container.style.marginTop = "70px";
      container.style.width = "50%"; 
      container.style.height = "50%"; 
      container.style.margin = "1050 500";
      container.style.justifyContent = "center";
      container.style.fontSize = "11px";
      container.appendChild(element.cloneNode(true));

      // html2pdf options
      const options = {
          filename: 'table.pdf',
          html2canvas: {
              scale: 2,
              scrollY: -window.scrollY,
              scrollX: -window.scrollX,
              useCORS: true
          },
          jsPDF: {
              unit: 'px',
              format: 'a4',
              orientation: 'portrait'
          }
      };

      html2pdf().set(options).from(container).save();
  }
</script>
                  
                  </div>
                </div>
              </div>  
              </div>
            </div>
        </div>
        <!-- <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link href="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.13.4/af-2.5.3/b-2.3.6/b-colvis-2.3.6/b-html5-2.3.6/b-print-2.3.6/cr-1.6.2/date-1.4.1/fc-4.2.2/fh-3.3.2/kt-2.9.0/r-2.4.1/rg-1.3.1/rr-1.3.3/sc-2.1.1/sb-1.4.2/sp-2.1.2/sl-1.6.2/datatables.min.css"
        rel="stylesheet"/> -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
  <!-- <script src="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.13.4/af-2.5.3/b-2.3.6/b-colvis-2.3.6/b-html5-2.3.6/b-print-2.3.6/cr-1.6.2/date-1.4.1/fc-4.2.2/fh-3.3.2/kt-2.9.0/r-2.4.1/rg-1.3.1/rr-1.3.3/sc-2.1.1/sb-1.4.2/sp-2.1.2/sl-1.6.2/datatables.min.js"></script>

  <script src="{{ url_for('static', filename='js/results/checkresults.js') }}"></script> -->
{% endblock %}