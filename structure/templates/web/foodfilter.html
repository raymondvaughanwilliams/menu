{% extends "web/base.html" %}
{% block content %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Content ================================================== -->
    <div class="container margin_60_35">
        <div class="row">
            <div class="col-lg-4">
               
                <div class="box_style_2">
                    <h4 class="nomargin_top">Filters<i class="icon_clock_alt float-right"></i></h4>
                    <ul class="opening_list">
                        <form method="post">
                            {{ form.csrf_token }}
                            {{ form.hidden_tag() }}
                        
                            {{ form.food_name.label }} {{ form.food_name }}
                            <br>
                            {{ form.min_price.label }} {{ form.min_price }}
                            {{ form.max_price.label }} {{ form.max_price }}
                            <br>
                            {{ form.submit }}
                          </form>
                    </ul>
                </div>
                <div id="filters_col">
                    <a data-toggle="collapse" href="#collapseFilters" aria-expanded="false" aria-controls="collapseFilters" id="filters_col_bt">Filters <i class="icon-plus-1 float-right"></i></a>
                    <div class="collapse show" id="collapseFilters">
                        <div class="filter_type">
                            <br>
                            <form method="post">
                   
                            {{ form.food_name.label }} 
                            {{ form.food_name }}
                                <br>
                            {{ form.min_price.label }}
                            <input id="min_price" name="min_price" data-slider-id='min_price_slider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="{{ form.min_price.data }}"/>
                            
                            {{ form.max_price.label }}
                            <input id="max_price" name="max_price" data-slider-id='max_price_slider' type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="{{ form.max_price.data }}"/>
                            
                            <br>
                            {{ form.submit }}
                            </form>
                        </div>
                       
                    </div><!--End collapse -->
                </div>
                <div class="box_style_2 d-none d-sm-block" id="help">
                    <i class="icon_lifesaver"></i>
                    <h4>Need <span>Help?</span></h4>
                    <a href="tel://004542344599" class="phone">+45 423 445 99</a>
                    <small>Monday to Friday 9.00am - 7.30pm</small>
                </div>
            </div>
            <div class="col-lg-8">
        
                <div id="tools">
                    <div class="row">
                        <div class="col-md-3 col-sm-4 col-5">
                            <div class="styled-select">
                                <select name="sort_rating" id="sort_rating">
                                    <option value="" selected="">Sort by price</option>
                                    <option value="lower">Lowest price</option>
                                    <option value="higher">Highest price</option>
                                </select>
                            </div>
                            
                        </div>
                        <div class="col-md-9 col-sm-8 col-7">
                            <a href="grid_list.html" class="bt_filters"><i class="icon-th"></i></a>
                        </div>
                    </div>
                </div><!--End tools -->
                <div id="foodList">
                    {% if  foods %}
                {%for food in foods %}
                <div class="strip_list wow fadeIn" data-wow-delay="0.1s">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="desc">
                                <div class="thumb_strip">
                                    <a href="detail_page.html"><img src="/static/quickfood/img/thumb_restaurant.jpg" alt=""></a>
                                </div>
                                <div class="rating">
                                    <i class="icon_star voted"></i><i class="icon_star voted"></i><i class="icon_star voted"></i><i class="icon_star "></i><i class="icon_star"></i> (<small><a href="#0">98 reviews</a></small>)
                                </div>
                                <h3>{{food.name}} - </h3>
                            
                                <div class="location">
                                   {{food.restaurant.name}} 
                                </div>
                                <ul>
                                    <li>Take away<i class="icon_check_alt2 ok"></i></li>
                                    <li>Delivery<i class="icon_check_alt2 no"></i></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="go_to">
                                <div>
                                    {{food.price}}cedis                                </div>
                            </div>
                        </div>
                    </div><!-- End row-->
                </div><!-- End strip_list-->
                {%endfor%}
           </div>
{%else%}
        <a href="#0" class="load_more_bt wow fadeIn" data-wow-delay="0.2s">No results found</a>  
        {%endif%}
</div><!-- End col-md-9-->
           
          
                   
                    </div><!-- End review strip -->
                </div><!-- End box_style_1 -->
            </div>
        </div><!-- End row -->
    </div><!-- End container -->
    <!-- End Content =============================================== -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.2/css/bootstrap-slider.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.2/bootstrap-slider.min.js"></script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script>
    $(document).ready(function() {
        $('#sort_rating').on('change', function() {
            var sortOption = $(this).val();

            // Function to sort food items
            function sortFoodItems() {
                var $foodList = $('#foodList');
                var $foodItems = $foodList.children('.strip_list');

                $foodItems.sort(function(a, b) {
                    var priceA = parseFloat($(a).find('.go_to div').text());
                    var priceB = parseFloat($(b).find('.go_to div').text());

                    if (sortOption === 'lower') {
                        return priceA - priceB;
                    } else if (sortOption === 'higher') {
                        return priceB - priceA;
                    }
                });

                $foodList.html($foodItems);
            }

            // Call the sort function
            sortFoodItems();
        });
    });
</script>


<script>
    $(document).ready(function(){
      // Initialize Bootstrap Slider for min_price
      $('#min_price').slider({
        formatter: function(value) {
          return 'Current value: $' + value;
        }
      });
  
      // Initialize Bootstrap Slider for max_price
      $('#max_price').slider({
        formatter: function(value) {
          return 'Current value: $' + value;
        }
      });
    });
  </script>
  
{%endblock%}